<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="cn.com.bohui.bohuifin.mapper.OperStateMapper">    <resultMap type="OperStateBean" id="OperStateResult">        <result column="oper_state_id" property="operStateId"/>        <result column="oper_state_name" property="operStateName"/>        <result column="prev_oper_state_id" property="prevOperStateId"/>        <result column="list_order" property="listOrder"/>        <result column="create_time" property="createTime"/>        <result column="create_by" property="createBy"/>        <result column="update_time" property="updateTime"/>        <result column="update_by" property="updateBy"/>        <result column="state" property="state"/>    </resultMap>    <resultMap type="OperStateBean" id="OperStateTableResult">        <result column="oper_state_id" property="operStateId"/>        <result column="oper_state_name" property="operStateName"/>        <result column="prev_oper_state_id" property="prevOperStateId"/>        <result column="list_order" property="listOrder"/>        <result column="create_time" property="createTime"/>        <result column="create_by" property="createBy"/>        <result column="update_time" property="updateTime"/>        <result column="update_by" property="updateBy"/>        <result column="state" property="state"/>        <collection property="productOperStateBeanList" ofType="ProductBean">            <result column="product_id" property="productId"/>            <result column="product_name" property="productName"/>        </collection>    </resultMap>    <sql id="baseSelect">		oper_state_id,		oper_state_name,		prev_oper_state_id,		list_order,		create_time,		create_by,		update_time,		update_by,		state	</sql>    <sql id="tableSelect">        select            os.oper_state_id as oper_state_id,            os.oper_state_name as oper_state_name,            os.prev_oper_state_id as prev_oper_state_id,            p.product_id as product_id,            p.product_name as product_name,            os.list_order as list_order,            os.create_time as create_time,            os.create_by as create_by,            os.update_time as update_time,            os.update_by as update_by,            os.state as state        from            t_oper_state os        left join            t_product_oper_state pos            inner join                t_product p            on                pos.product_id = p.product_id        on            os.oper_state_id = pos.oper_state_id    </sql>    <insert id="saveOperState" parameterType="OperStateBean">		insert into t_oper_state(oper_state_id, oper_state_name, prev_oper_state_id, create_time, create_by, update_time, update_by, state)		values (#{operStateId}, #{operStateName}, #{prevOperStateId}, #{createTime}, #{createBy}, #{updateTime}, #{updateBy}, #{state})	</insert>    <update id="updateOperState" parameterType="OperStateBean">		update t_oper_state		set			oper_state_name = #{operStateName}			,prev_oper_state_id = #{prevOperState}			,update_time = #{updateTime}			,update_by = #{updateBy}		where			oper_state_id = #{operStateId}	</update>    <select id="listOperStateByPage" parameterType="page" resultMap="OperStateResult">        select        <include refid="baseSelect"/>        from        t_oper_state        where        state = #{state}    </select>    <select id="listAllOperState" parameterType="java.util.Map" resultMap="OperStateResult">        select        <include refid="baseSelect"/>        from        t_oper_state        where        state = #{state}    </select>    <select id="listAllOperStateRefProduct" parameterType="java.util.Map" resultMap="OperStateTableResult">        <include refid="tableSelect"/>        where        os.state = #{state}        and pos.state = #{state}        and p.state = #{state}    </select>    <select id="findFirstOperState" parameterType="java.util.Map" resultMap="OperStateResult">        select        <include refid="baseSelect"/>        from        t_oper_state        where        state = #{state}        and        prev_oper_state_id = -1    </select>    <update id="removeOperStateById" parameterType="OperStateBean">		update		t_oper_state		set		state = #{state},		update_time = #{updateTime},		update_by = #{updateBy}		where		oper_state_id = #{operStateId}	</update></mapper>